version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "Installing pnpm globally..."
        - npm install -g pnpm
        - echo "pnpm installed successfully"
        - pnpm --version  # optional: to verify installation
        - nvm install 16  # or the Node.js version you require
        - nvm use 16
    build:
      commands:
        - echo "Running pnpm install..."
        - pnpm install --frozen-lockfile
        - echo "Running your build command..."
        - pnpm run build   # or replace with your actual build command
  artifacts:
    baseDirectory: /.next  # adjust to your build output directory if needed
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*